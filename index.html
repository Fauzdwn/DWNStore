<!DOCTYPE html>
<html lang="id">
<head>
  <link rel="shortcut icon" href="https://i.ibb.co.com/Kp0LWkHs/Chat-GPT-Image-8-Mei-2025-14-26-47.png" type="image/x-icon">

  <!-- favicon .png (modern) -->
  <link rel="icon" href="https://i.ibb.co.com/Kp0LWkHs/Chat-GPT-Image-8-Mei-2025-14-26-47.png" sizes="32x32" type="image/png">
  <link rel="icon" href="https://i.ibb.co.com/Kp0LWkHs/Chat-GPT-Image-8-Mei-2025-14-26-47.png" sizes="16x16" type="image/png">

  <!-- optional: Apple touch icon for iOS home screen -->
  <link rel="apple-touch-icon" href="https://i.ibb.co.com/Kp0LWkHs/Chat-GPT-Image-8-Mei-2025-14-26-47.png" sizes="180x180">

  
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
 <!-- SEO Meta Tags -->
<meta name="description" content="DWN Store menyediakan berbagai paket TV satelit seperti K-Vision, Nex Parabola, Nusantara HD serta layanan top up saldo decoder dengan harga terjangkau dan promo menarik.">
<meta name="keywords" content="K-Vision, Nex Parabola, Paket TV Satelit, Paket Nusantara, Top Up Decoder, Beli Paket K-Vision, Beli Paket Nex Parabola, DWN Store, TV Digital">
<meta name="robots" content="index, follow">
<link rel="canonical" href="https://dwnstore.my.id/">

<!-- Open Graph / Facebook -->
<meta property="og:type" content="website">
<meta property="og:url" content="https://dwnstore.my.id/">
<meta property="og:title" content="DWN Store â€“ Paket TV Satelit & Top Up Decoder Termurah">
<meta property="og:description" content="Temukan pilihan paket K-Vision, Nex Parabola, dan Nusantara HD hanya di DWN Store. Tersedia juga layanan isi saldo decoder cepat & terpercaya.">
<meta property="og:image" content="https://i.ibb.co.com/Kp0LWkHs/Chat-GPT-Image-8-Mei-2025-14-26-47.png">

<!-- Twitter Card -->
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:url" content="https://dwnstore.my.id/">
<meta name="twitter:title" content="DWN Store â€“ Paket TV Satelit & Top Up Decoder Termurah">
<meta name="twitter:description" content="Temukan pilihan paket K-Vision, Nex Parabola, dan Nusantara HD hanya di DWN Store. Tersedia juga layanan isi saldo decoder cepat & terpercaya.">
<meta name="twitter:image" content="https://i.ibb.co.com/Kp0LWkHs/Chat-GPT-Image-8-Mei-2025-14-26-47.png">

  <title>DWN Store</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">
  <style>
  body { font-family: 'Poppins', sans-serif; background: #fff; color: #333; }
  .navbar { background: #0d6efd; }
  .navbar-brand, .nav-link { color: #fff !important; }
  .section-title { text-align: center; margin: 2rem 0; color: #0d6efd; }

  /* Running text style */
  .running-text {
    background: #ffc107;
    color: #212529;
    padding: .5rem 0;
    overflow: hidden;
    white-space: nowrap;
  }
  .running-text span {
    display: inline-block;
    padding-left: 100%;
    animation: marquee 10s linear infinite;
  }
  @keyframes marquee {
    0% { transform: translateX(0%); }
    100% { transform: translateX(-100%); }
  }

  /* Product Card */
  .product-card {
    background: #fff;
    border: 1px solid #e0e0e0;
    border-radius: 15px;
    overflow: hidden;
    transition: transform .3s ease-in-out, box-shadow .3s ease-in-out;
    opacity: 0; /* Initially hidden for animation */
    animation: fadeIn 0.5s ease-in-out forwards;
    display: flex;
    flex-direction: column;
    min-width: 240px;
    scroll-snap-align: start;
    position: relative;
  }

  .product-card:hover {
    transform: translateY(-8px);
    box-shadow: 0 12px 24px rgba(0, 0, 0, 0.1);
  }

  .product-image {
    width: 100%;
    height: 180px;
    object-fit: cover;
  }

  .product-info {
    padding: 1rem;
    text-align: center;
    flex-grow: 1;
    display: flex;
    flex-direction: column;
    justify-content: space-between;
  }

  .product-info h5 {
    font-size: 1.1rem;
    font-weight: 600;
    color: #333;
    margin-bottom: .5rem;
  }

  .product-info .price {
    font-size: 1.2rem;
    font-weight: 700;
    color: #0d6efd;
    margin-bottom: 1rem;
  }

  .product-info .btn-primary {
    background: linear-gradient(45deg, #0d6efd, #0558d4);
    border: none;
    color: #fff;
    padding: .6rem 1rem;
    font-size: 1rem;
    border-radius: 8px;
    transition: transform .2s, box-shadow .2s;
    font-weight: 600;
  }

  .product-info .btn-primary:hover {
    transform: scale(1.05);
    box-shadow: 0 4px 12px rgba(13, 110, 253, 0.4);
  }

  /* Animation for cards loading */
  @keyframes fadeIn {
    from {
      opacity: 0;
      transform: translateY(20px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  .product-section-scroll {
    overflow-x: auto;
    display: flex;
    gap: 1rem;
    padding-bottom: 1rem;
    scroll-snap-type: x mandatory;
  }
  .product-section-scroll::-webkit-scrollbar {
    height: 8px;
  }
  .product-section-scroll::-webkit-scrollbar-thumb {
    background-color: #0d6efd;
    border-radius: 4px;
  }

  .product-label {
    position: absolute;
    top: 0.5rem;
    left: 0.5rem;
    background-color: #dc3545;
    color: #fff;
    padding: 0.2rem 0.5rem;
    font-size: 0.75rem;
    border-radius: 4px;
    font-weight: bold;
    z-index: 2;
  }


  footer { background: #0d6efd; color: #fff; padding: 2rem; text-align: center; }
</style>

  <link
      rel="stylesheet"
      type="text/css"
      href="https://cdn.jsdelivr.net/npm/@phosphor-icons/web@2.1.1/src/regular/style.css"
    />
    <link
      rel="stylesheet"
      type="text/css"
      href="https://cdn.jsdelivr.net/npm/@phosphor-icons/web@2.1.1/src/fill/style.css"
    />
</head>
<body>
  <!-- Navbar -->
  <nav class="navbar navbar-expand-lg">
    <div class="container-fluid">
      <a class="navbar-brand" href="#">DWNStore</a>
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="navbarNav">
        <ul class="navbar-nav ms-auto">
          <li class="nav-item"><a class="nav-link" href="index.html">Home</a></li>
          <li class="nav-item"><a class="nav-link" href="kvision">K-Vision</a></li>
          <li class="nav-item"><a class="nav-link" href="nusantara">Nusantara</a></li>
          <li class="nav-item"><a class="nav-link" href="nex">Nex Parabola</a></li>
        </ul>
      </div>
    </div>
  </nav>

  <!-- Banner Slider -->
  <section id="home">
    <div id="carouselBanner" class="carousel slide" data-bs-ride="carousel">
      <div class="carousel-inner">
        <div class="carousel-item active">
          <img src="https://i.ibb.co.com/ZRZfZqkk/Desain-tanpa-judul-1.png" class="d-block w-100" alt="Banner 1">
        </div>
        <div class="carousel-item">
          <img src="https://i.ibb.co.com/dsJNk7N5/Desain-tanpa-judul-2.png" class="d-block w-100" alt="Banner 2">
        </div>
        <div class="carousel-item">
          <img src="https://i.ibb.co.com/1t8V5jhD/Desain-tanpa-judul-3.png" class="d-block w-100" alt="Banner 3">
        </div>
      </div>
      <button class="carousel-control-prev" type="button" data-bs-target="#carouselBanner" data-bs-slide="prev">
        <span class="carousel-control-prev-icon"></span>
      </button>
      <button class="carousel-control-next" type="button" data-bs-target="#carouselBanner" data-bs-slide="next">
        <span class="carousel-control-next-icon"></span>
      </button>
    </div>
    <!-- Running Text -->
    <div class="running-text">
      <span>ðŸŽ‰ Selamat datang di DWNStore, silahkan isi paket TV mu! ðŸŽ‰</span>
    </div>
  </section>

  <!-- Products Sections -->
  <section id="products" class="container">
    <h2 class="section-title">Produk Populer</h2>
    <div class="product-section-scroll" id="produk-populer"></div>

    <h2 class="section-title">Paket K-Vision</h2>
    <div class="product-section-scroll" id="produk-kvision"></div>

    <h2 class="section-title">Paket Nusantara</h2>
    <div class="product-section-scroll" id="produk-nusantara"></div>

    <h2 class="section-title">Paket Nex Parabola</h2>
    <div class="product-section-scroll" id="produk-nex"></div>
  </section>

  <!-- Footer -->
  <footer id="contact">
    <p><i class="ph ph-envelope-simple"></i> <a href="mailto:ahmadfauzidarmawan18@gmail.com" class="text-white">info@dwnstore.my.id</a></p>
    <p><i class="ph ph-phone"></i> <a href="https://wa.me/6282272339956" class="text-white">6282272339956</a></p>
    <p>&copy; 2025 DWNStore.</p>
  </footer>

  <!-- Firebase & App Script -->
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-functions-compat.js"></script>
  <script src="config.js"></script>
  <script>
    // Initialize Firebase
    firebase.initializeApp(firebaseConfig);
    const db = firebase.database();

    // Render products with dynamic popularity
    async function renderProducts() {
      // ===================================================================================
      // IMPORTANT NOTE FOR DEPLOYMENT
      // ===================================================================================
      // The logic below simulates calling a secure backend function. In a real environment,
      // you should call the 'getProducts' cloud function from `/functions/index.js`.
      //
      // To switch to the real implementation, replace this simulation with:
      /*
        const functions = firebase.functions();
        const getProducts = functions.httpsCallable('getProducts');
        try {
          const result = await getProducts();
          const allProducts = result.data;
          // ... then proceed with the rendering logic below ...
        } catch (error) {
          console.error("Error fetching products from cloud function:", error);
        }
      */
      // ===================================================================================

      try {
        // --- Start of Simulation Logic ---
        const [productsSnapshot, buyersSnapshot] = await Promise.all([
          db.ref('produk').once('value'),
          db.ref('buyer').once('value')
        ]);

        const allProducts = [];
        const purchaseCounts = {};

        if (buyersSnapshot.exists()) {
          buyersSnapshot.forEach(buyerChild => {
            const buyer = buyerChild.val();
            if (buyer.produkId) {
              purchaseCounts[buyer.produkId] = (purchaseCounts[buyer.produkId] || 0) + 1;
            }
          });
        }

        productsSnapshot.forEach(productChild => {
          allProducts.push({
            id: productChild.key,
            ...productChild.val(),
            purchaseCount: purchaseCounts[productChild.key] || 0
          });
        });
        // --- End of Simulation Logic ---

        const secs = {
          populer: 'produk-populer',
          'k-vision': 'produk-kvision',
          nusantara: 'produk-nusantara',
          'nex parabola': 'produk-nex'
        };
        Object.values(secs).forEach(id => document.getElementById(id).innerHTML = '');

        // 1. Determine which products are popular
        const popularProductIds = new Set(
          allProducts
          .filter(p => p.purchaseCount > 0)
          .sort((a, b) => b.purchaseCount - a.purchaseCount)
          .slice(0, 5)
          .map(p => p.id)
        );

        if (popularProductIds.size > 0) {
          let popularCounter = 0;
          allProducts.forEach(product => {
            if (popularProductIds.has(product.id)) {
              popularCounter++;
              document.getElementById(secs.populer).innerHTML += createProductCard(product, popularCounter, true);
            }
          });
        } else {
          document.getElementById(secs.populer).innerHTML = '<p class="text-center">Belum ada produk populer saat ini.</p>';
        }

        // 2. Render products in their respective categories
        let counters = { 'k-vision': 0, nusantara: 0, 'nex parabola': 0 };
        allProducts.forEach(product => {
          const status = product.status.toLowerCase();
          const sectionId = secs[status];
          if (sectionId && status !== 'populer') {
            counters[status]++;
            const isPopular = popularProductIds.has(product.id);
            document.getElementById(sectionId).innerHTML += createProductCard(product, counters[status], isPopular);
          }
        });

      } catch (err) {
        console.error('Gagal memuat produk:', err);
        const secs = { populer: 'produk-populer', 'k-vision': 'produk-kvision', nusantara: 'produk-nusantara', 'nex parabola': 'produk-nex' };
        Object.values(secs).forEach(id => document.getElementById(id).innerHTML = '<p class="text-center text-danger">Gagal memuat produk. Silakan coba lagi nanti.</p>');
      }
    }

    function createProductCard(productData, delayIndex, isPopular) {
      const d = productData;
      const key = productData.id;

      let minPrice = 0;
      if (Array.isArray(d.variations) && d.variations.length > 0) {
        minPrice = d.variations
          .map(v => parseInt(v.price.replace(/[^0-9]/g, ''), 10))
          .reduce((a, b) => Math.min(a, b));
      }
      const priceText = minPrice ? `Mulai dari Rp${minPrice.toLocaleString()}` : 'Harga bervariasi';

      return `
        <div class="product-card" style="animation-delay: ${delayIndex * 0.1}s">
          ${isPopular ? '<div class="product-label">Terlaris ðŸ”¥</div>' : ''}
          <img src="${d.urlgambar}" class="product-image" alt="${d.nama}">
          <div class="product-info">
            <div>
              <h5>${d.nama}</h5>
              <p class="price">${priceText}</p>
            </div>
            <a href="beli/index.html?id=${key}" class="btn btn-primary">Lihat Detail</a>
          </div>
        </div>`;
    }

    document.addEventListener('DOMContentLoaded', renderProducts);
  </script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
